{% extends 'main/loggedIn.html'%}

{% block head %} 
<link rel="stylesheet" href="{{url_for('static',filename='css/chat.css')}}"> 
<script src ="../../static/js/functions.js"> </script>

{% endblock %}

{% block content %} 
	<a href="{{url_for('routes.getChatroomMessages')}}">See Messages</a> 
<div class="flex-container"> 
	<div id="chat-box" class="flex-item" >
		<ul id="messages-list">

		</ul>

	</div>

	<div id="chat-input" class="flex-item" >
		<input id="bar" class="chat-input-bar" type="text" placeholder="Chat Here">
		<ul id="search-results"> 
		</ul>
		<button id="chat-submit" class="chat-input-bar" onclick="submitChat()"> Chat </button>
	</div>
</div> 



<script>

	async function getMessages() {
		try {
			const response = await fetch('/getMessages');
			const data = await response.json();
			<!-- console.log("\ngetMessages()") -->
			<!-- console.log(data) -->
			<!-- console.log() --> 
			return data;
		} catch (error) {
			console.error ('Errors: ', error);
		}
	}

	async function fillChatBox() { 
		let chatbox = document.getElementById("chat-box");
		let data = await getMessages();
		console.log("\nfillChatBox");
		console.log(data);
		console.log();
		<!-- chatbox.innerHTML = JSON.stringify(data); -->
		populateMessages (data);
	}

	document.addEventListener('DOMContentLoaded', fillChatBox)


</script>



{% endblock %}

